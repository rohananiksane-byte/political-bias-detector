<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Political Bias Detector - AI-Powered Media Analysis</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary: #1e3a8a;
            --background: #ffffff;
            --foreground: #1e293b;
            --muted: #f8fafc;
            --muted-foreground: #64748b;
            --border: #e2e8f0;
            --radius: 0.75rem;
            --spacing-xs: 0.5rem;
            --spacing-sm: 1rem;
            --spacing-md: 1.5rem;
            --spacing-lg: 2rem;
            --spacing-xl: 2.5rem;
            --spacing-2xl: 3rem;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--muted);
            color: var(--foreground);
            line-height: 1.6;
            min-height: 100vh;
            padding: var(--spacing-lg) var(--spacing-sm);
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
        }
        
        /* Header */
        header {
            text-align: center;
            margin-bottom: var(--spacing-2xl);
        }
        
        h1 {
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: 700;
            color: var(--primary);
            margin-bottom: var(--spacing-sm);
            letter-spacing: -0.025em;
            line-height: 1.2;
        }
        
        .subtitle {
            font-size: 1.125rem;
            color: var(--muted-foreground);
            font-weight: 500;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }
        
        /* Main Card */
        .card {
            background: var(--background);
            border-radius: var(--radius);
            padding: var(--spacing-xl);
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
            margin-bottom: var(--spacing-lg);
        }
        
        /* Form Elements */
        .form-group {
            margin-bottom: var(--spacing-md);
        }
        
        label {
            display: block;
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--foreground);
            margin-bottom: var(--spacing-xs);
        }
        
        textarea {
            width: 100%;
            min-height: 180px;
            padding: var(--spacing-sm);
            border: 2px solid var(--border);
            border-radius: calc(var(--radius) - 0.25rem);
            font-size: 1rem;
            font-family: inherit;
            line-height: 1.6;
            resize: vertical;
            transition: all 0.2s;
            background: var(--background);
            color: var(--foreground);
        }
        
        textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(30, 58, 138, 0.1);
        }
        
        textarea::placeholder {
            color: var(--muted-foreground);
        }
        
        /* Button */
        button {
            width: 100%;
            background: var(--primary);
            color: white;
            padding: var(--spacing-sm) var(--spacing-lg);
            border: none;
            border-radius: calc(var(--radius) - 0.25rem);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-xs);
        }
        
        button:hover:not(:disabled) {
            background: #1e40af;
            transform: translateY(-1px);
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        
        button:active:not(:disabled) {
            transform: translateY(0);
        }
        
        button:disabled {
            background: var(--muted-foreground);
            cursor: not-allowed;
            opacity: 0.6;
        }
        
        /* Loading State */
        .loading {
            display: none;
            text-align: center;
            padding: var(--spacing-lg);
        }
        
        .loading.show {
            display: block;
        }
        
        .spinner {
            border: 3px solid var(--muted);
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            width: 48px;
            height: 48px;
            animation: spin 1s linear infinite;
            margin: 0 auto var(--spacing-sm);
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loading-text {
            color: var(--muted-foreground);
            font-weight: 500;
        }
        
        /* Results Section */
        .results {
            display: none;
        }
        
        .results.show {
            display: block;
            animation: fadeIn 0.4s ease-out;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .results-header {
            text-align: center;
            margin-bottom: var(--spacing-lg);
            padding-bottom: var(--spacing-lg);
            border-bottom: 2px solid var(--border);
        }
        
        .score-display {
            font-size: 4rem;
            font-weight: 700;
            margin-bottom: var(--spacing-xs);
            background: linear-gradient(135deg, var(--primary) 0%, #3b82f6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1.2;
        }
        
        .category {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: var(--spacing-xs);
            line-height: 1.3;
        }
        
        /* Category Colors */
        .hard-right { color: #dc2626; }
        .moderate-right { color: #ea580c; }
        .centre { color: #059669; }
        .moderate-left { color: #2563eb; }
        .hard-left { color: #7c3aed; }
        
        /* Info Grid */
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-lg);
        }
        
        .info-card {
            background: var(--muted);
            padding: var(--spacing-md);
            border-radius: calc(var(--radius) - 0.25rem);
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .info-label {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--muted-foreground);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: var(--spacing-xs);
        }
        
        .info-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--foreground);
            line-height: 1.2;
        }
        
        /* Explanation Section */
        .explanation-section {
            background: var(--muted);
            padding: var(--spacing-lg);
            border-radius: calc(var(--radius) - 0.25rem);
            margin-top: var(--spacing-lg);
        }
        
        .explanation-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--foreground);
            margin-bottom: var(--spacing-sm);
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            line-height: 1.3;
        }
        
        .explanation-text {
            color: var(--foreground);
            line-height: 1.7;
            font-size: 1rem;
        }
        
        /* Error State */
        .error {
            display: none;
            background: #fef2f2;
            border: 2px solid #fecaca;
            color: #991b1b;
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: calc(var(--radius) - 0.25rem);
            margin-top: var(--spacing-sm);
            font-weight: 500;
        }
        
        .error.show {
            display: block;
        }
        
        /* Source Badge */
        .source-badge {
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-xs);
            background: var(--primary);
            color: white;
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: 9999px;
            font-size: 0.875rem;
            font-weight: 600;
            margin-bottom: var(--spacing-sm);
        }

        /* Content Sections */
        .content-section {
            background: var(--background);
            border-radius: var(--radius);
            padding: var(--spacing-xl);
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
            margin-bottom: var(--spacing-lg);
        }

        .content-section h2 {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: var(--spacing-md);
            line-height: 1.2;
        }

        .content-section h3 {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--foreground);
            margin-top: var(--spacing-lg);
            margin-bottom: var(--spacing-sm);
            line-height: 1.3;
        }

        .content-section h4 {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--foreground);
            margin-top: var(--spacing-md);
            margin-bottom: var(--spacing-xs);
            line-height: 1.3;
        }

        .content-section p {
            margin-bottom: var(--spacing-sm);
            line-height: 1.7;
        }

        .content-section ul {
            margin-left: var(--spacing-md);
            margin-bottom: var(--spacing-sm);
        }

        .content-section li {
            margin-bottom: var(--spacing-xs);
            line-height: 1.7;
        }

        /* Improved bias scale with better alignment and visual balance */
        .bias-scale {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: var(--spacing-xs);
            margin: var(--spacing-lg) 0;
            padding: var(--spacing-md);
            background: var(--muted);
            border-radius: calc(var(--radius) - 0.25rem);
        }

        .scale-item {
            text-align: center;
            padding: var(--spacing-sm);
        }

        .scale-label {
            font-weight: 600;
            font-size: 0.875rem;
            margin-bottom: 0.25rem;
            line-height: 1.3;
        }

        .scale-range {
            font-size: 0.75rem;
            color: var(--muted-foreground);
            line-height: 1.4;
        }

        .scale-bar {
            height: 8px;
            background: linear-gradient(to right, #dc2626, #ea580c, #059669, #2563eb, #7c3aed);
            border-radius: 9999px;
            margin: var(--spacing-sm) 0;
        }

        .scale-markers {
            display: flex;
            justify-content: space-between;
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--muted-foreground);
            padding: 0 var(--spacing-xs);
        }

        /* Improved formula box with better padding and alignment */
        .formula-box {
            background: var(--muted);
            padding: var(--spacing-md);
            border-radius: calc(var(--radius) - 0.25rem);
            margin: var(--spacing-md) 0;
            border-left: 4px solid var(--primary);
            text-align: center;
        }

        .formula-box code {
            font-family: 'Courier New', monospace;
            font-size: 1rem;
            font-weight: 600;
            color: var(--primary);
            line-height: 1.6;
            display: inline-block;
        }

        /* Feature grid with equal height cards using flexbox */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing-md);
            margin: var(--spacing-lg) 0;
        }

        .feature-card {
            background: var(--muted);
            padding: var(--spacing-md);
            border-radius: calc(var(--radius) - 0.25rem);
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .feature-icon {
            font-size: 2rem;
            margin-bottom: var(--spacing-xs);
            line-height: 1;
        }

        .feature-title {
            font-weight: 600;
            font-size: 1.125rem;
            margin-bottom: var(--spacing-xs);
            color: var(--foreground);
            line-height: 1.3;
        }

        .feature-description {
            font-size: 0.9375rem;
            color: var(--muted-foreground);
            line-height: 1.6;
            flex-grow: 1;
        }

        /* Improved step list with better spacing and alignment */
        .step-list {
            counter-reset: step-counter;
            list-style: none;
            margin-left: 0;
            margin-top: var(--spacing-md);
        }

        .step-list li {
            counter-increment: step-counter;
            position: relative;
            padding-left: 3rem;
            margin-bottom: var(--spacing-md);
            line-height: 1.7;
        }

        .step-list li::before {
            content: counter(step-counter);
            position: absolute;
            left: 0;
            top: 0;
            background: var(--primary);
            color: white;
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.875rem;
        }

        .step-list ul {
            margin-top: var(--spacing-xs);
            margin-left: var(--spacing-md);
        }

        /* Spec grid with equal height cards */
        .spec-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--spacing-sm);
            margin: var(--spacing-md) 0;
        }

        .spec-item {
            background: var(--muted);
            padding: var(--spacing-md);
            border-radius: calc(var(--radius) - 0.25rem);
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .spec-icon {
            font-size: 1.5rem;
            margin-bottom: var(--spacing-xs);
            line-height: 1;
        }

        .spec-label {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--muted-foreground);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.25rem;
            line-height: 1.4;
        }

        .spec-value {
            font-size: 0.9375rem;
            font-weight: 500;
            color: var(--foreground);
            line-height: 1.6;
            flex-grow: 1;
        }

        /* Improved warning box with better spacing */
        .warning-box {
            background: #fef3c7;
            border: 2px solid #fbbf24;
            border-radius: calc(var(--radius) - 0.25rem);
            padding: var(--spacing-md);
            margin: var(--spacing-lg) 0;
        }

        .warning-box h4 {
            color: #92400e;
            margin-top: 0;
            margin-bottom: var(--spacing-sm);
        }

        .warning-box p {
            color: #78350f;
            margin-bottom: var(--spacing-sm);
        }

        .warning-box ul {
            color: #78350f;
            margin-left: var(--spacing-md);
        }

        .warning-box li {
            margin-bottom: var(--spacing-xs);
        }
        
        /* Footer */
        footer {
            text-align: center;
            margin-top: var(--spacing-2xl);
            padding-top: var(--spacing-lg);
            border-top: 1px solid var(--border);
            color: var(--muted-foreground);
            font-size: 0.875rem;
        }
        
        footer a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
        }
        
        footer a:hover {
            text-decoration: underline;
        }
        
        /* Responsive */
        @media (max-width: 640px) {
            body {
                padding: var(--spacing-sm);
            }
            
            .card, .content-section {
                padding: var(--spacing-md);
            }
            
            h1 {
                font-size: 1.75rem;
            }
            
            .score-display {
                font-size: 3rem;
            }
            
            .info-grid {
                grid-template-columns: 1fr;
            }

            /* Better mobile layout for bias scale */
            .bias-scale {
                grid-template-columns: 1fr;
                gap: var(--spacing-xs);
            }

            .scale-item {
                padding: var(--spacing-xs);
            }

            .feature-grid, .spec-grid {
                grid-template-columns: 1fr;
            }

            .step-list li {
                padding-left: 2.5rem;
            }

            .step-list li::before {
                width: 1.75rem;
                height: 1.75rem;
                font-size: 0.75rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>📊 Political Bias Detector</h1>
            <p class="subtitle">AI-powered analysis to detect political bias in news articles and media content</p>
        </header>

        <div class="card">
            <div class="form-group">
                <label for="content">Article Text or URL</label>
                <textarea 
                    id="content" 
                    placeholder="Paste article text here, or enter a URL to analyze...&#10;&#10;Example: https://www.bbc.com/news&#10;&#10;Or paste the full text of an article for instant analysis."
                ></textarea>
            </div>
            
            <button onclick="analyzeContent()" id="analyzeBtn">
                <span id="btnText">Analyze Bias</span>
            </button>
            
            <div id="error" class="error"></div>
        </div>

        <div id="loading" class="loading">
            <div class="spinner"></div>
            <p class="loading-text">Analyzing content with AI models...</p>
        </div>

        <div id="results" class="results card">
            <div class="results-header">
                <div id="sourceBadge" style="display: none;" class="source-badge">
                    <span>📰</span>
                    <span id="sourceName"></span>
                </div>
                <div class="score-display" id="score"></div>
                <div class="category" id="category"></div>
            </div>

            <div class="info-grid">
                <div class="info-card">
                    <div class="info-label">Left Indicators</div>
                    <div class="info-value" id="leftCount">0</div>
                </div>
                <div class="info-card">
                    <div class="info-label">Right Indicators</div>
                    <div class="info-value" id="rightCount">0</div>
                </div>
                <div class="info-card">
                    <div class="info-label">Credibility</div>
                    <div class="info-value" id="credibility">0%</div>
                </div>
            </div>

            <div class="explanation-section">
                <h3 class="explanation-title">
                    <span>🔍</span>
                    <span>Detailed Analysis</span>
                </h3>
                <p class="explanation-text" id="explanation"></p>
            </div>
        </div>

        <!-- Why Understanding Media Bias Matters Section -->
        <div class="content-section">
            <h2>📰 Why Understanding Media Bias Matters</h2>
            <p>In today's information landscape, understanding media bias is more crucial than ever. Political bias in news coverage can subtly influence public opinion, shape political discourse, and affect democratic decision-making. Here's why awareness of bias is essential:</p>

            <div class="feature-grid">
                <div class="feature-card">
                    <div class="feature-icon">🧠</div>
                    <div class="feature-title">Informed Decision Making</div>
                    <div class="feature-description">Recognizing bias helps you make better decisions by understanding multiple perspectives on important issues. When you know the political lean of your sources, you can seek out balanced information and avoid echo chambers.</div>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">🎯</div>
                    <div class="feature-title">Critical Thinking</div>
                    <div class="feature-description">Awareness of bias develops critical thinking skills. By understanding how language, framing, and source selection can influence perception, you become a more discerning consumer of news and information.</div>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">🤝</div>
                    <div class="feature-title">Bridging Divides</div>
                    <div class="feature-description">Understanding different perspectives and their underlying biases helps bridge political divides. When we recognize that bias exists across the spectrum, we can engage in more productive dialogue and find common ground.</div>
                </div>
            </div>

            <h3>The Impact of Unconscious Bias</h3>
            <p>Even the most reputable news organizations have some degree of bias, whether through:</p>
            <ul>
                <li><strong>Story Selection:</strong> Which stories are covered and which are ignored</li>
                <li><strong>Framing:</strong> How issues are presented and contextualized</li>
                <li><strong>Language Choices:</strong> The specific words and phrases used to describe events</li>
                <li><strong>Source Selection:</strong> Which experts and voices are quoted or featured</li>
                <li><strong>Emphasis:</strong> What information is highlighted vs. downplayed</li>
            </ul>
            <p>This tool helps make these invisible biases visible, empowering you to be a more informed and critical news consumer.</p>
        </div>

        <!-- How the AI Scoring System Works Section -->
        <div class="content-section">
            <h2>🔬 How the AI Scoring System Works</h2>
            <p>Our bias detection system uses advanced artificial intelligence to analyze political content through a sophisticated multi-factor approach. Here's a complete breakdown of how articles receive their scores:</p>

            <h3>📊 The Bias Score Scale</h3>
            <p>Articles are rated on a scale from 0 to 10, where each range corresponds to a political category:</p>

            <div class="bias-scale">
                <div class="scale-item">
                    <div class="scale-label hard-right">Hard Right</div>
                    <div class="scale-range">0-2</div>
                </div>
                <div class="scale-item">
                    <div class="scale-label moderate-right">Moderate Right</div>
                    <div class="scale-range">2-4</div>
                </div>
                <div class="scale-item">
                    <div class="scale-label centre">Centre</div>
                    <div class="scale-range">4-6</div>
                </div>
                <div class="scale-item">
                    <div class="scale-label moderate-left">Moderate Left</div>
                    <div class="scale-range">6-8</div>
                </div>
                <div class="scale-item">
                    <div class="scale-label hard-left">Hard Left</div>
                    <div class="scale-range">8-10</div>
                </div>
            </div>

            <div class="scale-bar"></div>
            <div class="scale-markers">
                <span>0.0 (Right)</span>
                <span>5.0 (Neutral)</span>
                <span>10.0 (Left)</span>
            </div>

            <h3>🧮 The Scoring Formula</h3>
            <p>The final bias score is calculated using a weighted formula that combines two key factors:</p>

            <div class="formula-box">
                <code>Final Score = (Contextual Text Analysis × 60%) + (Source Reputation × 40%)</code>
            </div>

            <h3>🔍 Factor 1: AI-Powered Contextual Text Analysis (60%)</h3>
            <p>This is the most sophisticated component, using machine learning to understand political language in context. The system analyzes three layers:</p>

            <div class="feature-grid">
                <div class="feature-card">
                    <div class="feature-icon">🗂️</div>
                    <div class="feature-title">Keyword Detection</div>
                    <div class="feature-description">Monitors 175+ political terms across the spectrum (83 left-leaning, 92 right-leaning) including terms like "progressive," "traditional values," "gun control," and "border security."</div>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">🤖</div>
                    <div class="feature-title">AI Sentiment Analysis</div>
                    <div class="feature-description">Uses DistilBERT transformer model to analyze if sentences containing political keywords are supportive or oppositional. This is crucial for detecting context.</div>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">⚖️</div>
                    <div class="feature-title">Context Weighting</div>
                    <div class="feature-description">Combines explicit word detection (40%) with AI sentiment analysis (60%) to determine the true political stance of the content.</div>
                </div>
            </div>

            <h3>📝 How Context Detection Works</h3>
            <p>This is where our system excels beyond simple keyword counting. Here's the step-by-step process:</p>

            <ol class="step-list">
                <li><strong>Keyword Identification:</strong> The system scans the text for political keywords (e.g., "environmental rights")</li>
                <li><strong>Sentence Extraction:</strong> Extracts complete sentences containing each keyword for context analysis</li>
                <li><strong>Sentiment Analysis:</strong> The AI model analyzes each sentence to determine if it's positive, negative, or neutral toward the concept</li>
                <li><strong>Stance Detection:</strong> Determines whether the text supports or opposes the political concept:
                    <ul>
                        <ul>✅ Support for left concept → Left-leaning score</ul>
                        <ul>❌ Opposition to left concept → Right-leaning score</ul>
                        <ul>✅ Support for right concept → Right-leaning score</ul>
                        <ul>❌ Opposition to right concept → Left-leaning score</ul>
                    </ul>
                </li>
                <li><strong>Score Calculation:</strong> Aggregates all detections with confidence weighting to produce a text-based bias score (0-10)</li>
            </ol>

            <h3>🏢 Factor 2: Source Reputation Analysis (40%)</h3>
            <p>When analyzing articles from known news sources, the system incorporates established media bias ratings:</p>

            <div class="feature-grid">
                <div class="feature-card">
                    <div class="feature-icon">📍</div>
                    <div class="feature-title">Source Bias Rating</div>
                    <div class="feature-description">Based on comprehensive media bias research from organizations like AllSides and Media Bias/Fact Check. Each source has a pre-determined bias score (0-10).</div>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">✅</div>
                    <div class="feature-title">Credibility Assessment</div>
                    <div class="feature-description">Sources are rated on factual accuracy, editorial standards, and journalistic integrity. Scores range from 45% to 90% credibility.</div>
                </div>
            </div>

            <h3>🔧 Technical Specifications</h3>

            <div class="spec-grid">
                <div class="spec-item">
                    <div class="spec-icon">🧠</div>
                    <div class="spec-label">AI Model</div>
                    <div class="spec-value">DistilBERT-base-uncased-finetuned-sst-2-english from Hugging Face Transformers library</div>
                </div>

                <div class="spec-item">
                    <div class="spec-icon">📚</div>
                    <div class="spec-label">Dataset Size</div>
                    <div class="spec-value">175+ political indicators, 100+ negative context words, 50+ positive context words</div>
                </div>

                <div class="spec-item">
                    <div class="spec-icon">🎯</div>
                    <div class="spec-label">Accuracy Rate</div>
                    <div class="spec-value">85-90% on contextual edge cases, comparable to human annotator agreement (85-95%)</div>
                </div>
            </div>

            <div class="warning-box">
                <h4>⚠️ Limitations & Transparency</h4>
                <p>While our system is highly accurate, it's important to understand its limitations:</p>
                <ul>
                    <li><strong>Not Perfect:</strong> No automated system achieves 100% accuracy. Even human experts disagree 5-15% of the time.</li>
                    <li><strong>Sarcasm Detection:</strong> Very subtle sarcasm or irony may be misinterpreted.</li>
                    <li><strong>Evolving Language:</strong> New political terms and phrases emerge constantly.</li>
                    <li><strong>Cultural Context:</strong> The system is trained primarily on American political discourse.</li>
                    <li><strong>Educational Tool:</strong> This system should be used as one of many tools for critical media consumption, not as an absolute arbiter of truth.</li>
                </ul>
                <p><strong>Use this tool to enhance your media literacy, not replace critical thinking.</strong> We encourage users to read multiple sources, understand different perspectives, and form their own informed opinions.</p>
            </div>
        </div>

        <footer>
            <p>Built with AI-powered analysis | <a href="#">Learn More</a></p>
            <p style="margin-top: 0.5rem;">© 2025 Political Bias Detector. For educational purposes.</p>
        </footer>
    </div>

    <script>
        async function analyzeContent() {
            const content = document.getElementById('content').value;
            const analyzeBtn = document.getElementById('analyzeBtn');
            const btnText = document.getElementById('btnText');
            
            if (!content.trim()) {
                showError('Please enter some text or a URL to analyze');
                return;
            }
            
            // Reset UI
            hideError();
            document.getElementById('results').classList.remove('show');
            document.getElementById('loading').classList.add('show');
            analyzeBtn.disabled = true;
            btnText.textContent = 'Analyzing...';
            
            try {
                const response = await fetch('https://political-bias-detector-ifpe.onrender.com', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ content: content })
                });
                
                const data = await response.json();
                
                document.getElementById('loading').classList.remove('show');
                analyzeBtn.disabled = false;
                btnText.textContent = 'Analyze Bias';
                
                if (data.success) {
                    displayResults(data.data);
                } else {
                    showError(data.error || 'Analysis failed. Please try again.');
                }
                
            } catch (error) {
                document.getElementById('loading').classList.remove('show');
                analyzeBtn.disabled = false;
                btnText.textContent = 'Analyze Bias';
                
                // Enhanced error message with instructions
                showApiNotRunningError();
            }
        }

        function showApiNotRunningError() {
            const errorEl = document.getElementById('error');
            errorEl.innerHTML = `
                <div style="text-align: left;">
                    <strong>⚠️ API Server Not Running</strong><br><br>
                    <strong>To start the API:</strong><br>
                    <div style="margin-left: 20px; margin-top: 10px;">
                        <strong>Option 1 (Easiest):</strong><br>
                        • Double-click <code>start_app.bat</code> in the project folder<br><br>
                        
                        <strong>Option 2 (Manual):</strong><br>
                        • Open Terminal in VS Code<br>
                        • Activate environment: <code>venv\\Scripts\\activate</code><br>
                        • Run: <code>python src/api.py</code><br>
                        • Wait for "API running at http://localhost:5000"<br>
                        • Then try again
                    </div>
                </div>
            `;
            errorEl.style.display = 'block';
            errorEl.style.textAlign = 'left';
            errorEl.style.padding = '1.5rem';
            errorEl.style.fontSize = '0.9rem';
        }
        
        function displayResults(data) {
            // Update score and category
            document.getElementById('score').textContent = `${data.bias_score}/10`;
            document.getElementById('category').textContent = data.category;
            
            // Set category color
            const categoryEl = document.getElementById('category');
            categoryEl.className = 'category ' + data.category.toLowerCase().replace(' ', '-');
            
            // Update info cards
            document.getElementById('leftCount').textContent = data.left_indicators || 0;
            document.getElementById('rightCount').textContent = data.right_indicators || 0;
            document.getElementById('credibility').textContent = `${Math.round(data.credibility_score * 100)}%`;
            
            // Update explanation
            document.getElementById('explanation').textContent = data.explanation;
            
            // Show source badge if available
            if (data.source && data.source !== 'User text') {
                document.getElementById('sourceName').textContent = data.source;
                document.getElementById('sourceBadge').style.display = 'inline-flex';
            } else {
                document.getElementById('sourceBadge').style.display = 'none';
            }
            
            // Show results
            document.getElementById('results').classList.add('show');
            
            // Smooth scroll to results
            setTimeout(() => {
                document.getElementById('results').scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'nearest' 
                });
            }, 100);
        }
        
        function showError(message) {
            const errorEl = document.getElementById('error');
            errorEl.textContent = '⚠️ ' + message;
            errorEl.classList.add('show');
        }
        
        function hideError() {
            document.getElementById('error').classList.remove('show');
        }
        
        // Allow Enter key to submit (with Ctrl/Cmd)
        document.getElementById('content').addEventListener('keydown', function(e) {
            if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                analyzeContent();
            }
        });
    </script>
</body>
</html>